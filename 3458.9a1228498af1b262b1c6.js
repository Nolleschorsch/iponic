(self.webpackChunkiponic=self.webpackChunkiponic||[]).push([[3458],{3458:(e,l,t)=>{"use strict";t.r(l),t.d(l,{MinesweeperPageModule:()=>y});var c=t(8583),n=t(665),o=t(3083),r=t(2316),i=t(639);const s={width:"50px",height:"50px",border:"solid black 1px",textAlign:"center",display:"table-cell",verticalAlign:"middle",backgroundColor:"#aaa",color:"#aaa",fontWeight:"bold"},a={cellStyleDefault:s,cellStyleMine:Object.assign({},s,{backgroundColor:"red"}),cellStyle0:Object.assign({},s,{color:"#ccc",backgroundColor:"#ccc"}),cellStyle1:Object.assign({},s,{color:"blue",backgroundColor:"#ccc"}),cellStyle2:Object.assign({},s,{color:"green",backgroundColor:"#ccc"}),cellStyle3:Object.assign({},s,{color:"red",backgroundColor:"#ccc"}),cellStyle4:Object.assign({},s,{color:"purple",backgroundColor:"#ccc"}),cellStyle5:Object.assign({},s,{color:"maroon",backgroundColor:"#ccc"}),cellStyle6:Object.assign({},s,{color:"turqoise",backgroundColor:"#ccc"}),cellStyle7:Object.assign({},s,{color:"black",backgroundColor:"#ccc"}),cellStyle8:Object.assign({},s,{color:"gray",backgroundColor:"#ccc"})};let g=(()=>{class e{constructor(){this.getRandomInt=(e,l)=>(e=Math.ceil(e),l=Math.floor(l),Math.floor(Math.random()*(l-e+1))+e),this.seedMines=(e,l)=>{let t=new Array;for(;t.length!=l;){let l=this.getRandomInt(0,e-1);-1==t.indexOf(l)&&t.push(l)}return t},this.getAdjectantCells=(e,l)=>{let t=[],c=Object.keys(e).length;Object.keys(e).forEach((l,c)=>{e[l].forEach((e,l)=>{t.push(e)})}),t.forEach((e,l)=>{let n=[];e.col>0&&n.push(t[e.index-1]),e.col<c-1&&n.push(t[e.index+1]),e.row>0&&(n.push(t[e.index-c]),t[e.index-c].col>0&&n.push(t[e.index-c-1]),t[e.index-c].col<c-1&&n.push(t[e.index-c+1])),e.row<c-1&&(n.push(t[e.index+c]),t[e.index+c].col>0&&n.push(t[e.index+c-1]),t[e.index+c].col<c-1&&n.push(t[e.index+c+1])),e.neighbours=n});let n=[];for(var o=0;o<c*l;o++){let e=Math.floor(o/l);n[e]||(n[e]=[]),n[e][o%l]=t[o]}return n},this.createField=(e,l,t)=>{const c=e*l;let n={};const o=this.seedMines(c,t);for(var r=0;r<c;r++){let e=-1!=o.indexOf(r),t=Math.floor(r/l);t in n||(n[t]=[]),n[t].push({mine:e,index:r,toggled:!1,flag:!1,row:Math.floor(r/l),col:r%l})}return this.getAdjectantCells(n,l)},this.getCellStyle=(e,l,t)=>{if(!e)return a.cellStyleDefault;if(l)return a.cellStyleMine;switch(t){case 1:return a.cellStyle1;case 2:return a.cellStyle2;case 3:return a.cellStyle3;case 4:return a.cellStyle4;case 5:return a.cellStyle5;case 6:return a.cellStyle6;case 7:return a.cellStyle7;case 8:return a.cellStyle8;default:return a.cellStyle0}},this.handleToggleCell=(e,l,t)=>(e.toggled||(e.toggled=!0,l.push(e)),e.neighbours.forEach(e=>{e.mine||e.toggled||-1!=l.indexOf(e.index)||(e.toggled=!0,l.push(e),0==e.neighbours.filter(e=>1==e.mine).length&&this.handleToggleCell(e,l,t))}),[...new Set(l)].forEach(e=>t[e.row][e.col]=e),t)}}return e.\u0275fac=function(l){return new(l||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function d(e,l){if(1&e){const e=i.EpF();i.TgZ(0,"div",4),i.NdJ("click",function(){const l=i.CHM(e).$implicit,t=i.oxw(2);return t.handleToggleCell(l,[],t.field)}),i._uU(1),i.qZA()}if(2&e){const e=l.$implicit,t=i.oxw(2);i.Q6J("ngClass",t.getStyle(e)),i.xp6(1),i.Oqu(e.mine?"X":t.getAdjMines(e))}}function u(e,l){if(1&e&&(i.TgZ(0,"div",2),i.YNc(1,d,2,2,"div",3),i.qZA()),2&e){const e=l.$implicit,t=i.oxw();i.Q6J("ngClass",t.fieldRow),i.xp6(1),i.Q6J("ngForOf",e)}}const h=[{path:"",component:(()=>{class e{constructor(e){this.msService=e,this._height=10,this._width=10,this._mines=10}ngOnInit(){this._field=this.msService.createField(this._height,this._width,this._mines),console.log(this._field)}get height(){return this._height}set height(e){this._height=e}get width(){return this._width}set width(e){this._width=e}get mines(){return this._mines}set mines(e){this._mines=e}get field(){return this._field}newGame(){this._field=this.msService.createField(this._height,this._width,this._mines)}getStyle(e){const l=e.neighbours.filter(e=>1==e.mine).length;if(!e.toggled)return"cell cellStyleDefault";if(e.mine)return"cell cellStyleMine";switch(l){case 1:return"cell cellStyle1";case 2:return"cell cellStyle2";case 3:return"cell cellStyle3";case 4:return"cell cellStyle4";case 5:return"cell cellStyle5";case 6:return"cell cellStyle6";case 7:return"cell cellStyle7";case 8:return"cell cellStyle8";default:return"cell cellStyle0"}}getAdjMines(e){return e.neighbours.filter(e=>1==e.mine).length}handleToggleCell(e,l,t){const c=this.msService.handleToggleCell(e,l,t);console.log({foo:c}),console.log({field:t}),this._field=c}}return e.\u0275fac=function(l){return new(l||e)(i.Y36(g))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-minesweeper"]],decls:10,vars:1,consts:[[3,"click"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(e,l){1&e&&(i.TgZ(0,"ion-header"),i.TgZ(1,"ion-toolbar"),i.TgZ(2,"ion-title"),i._uU(3,"minesweeper"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(4,"ion-content"),i.TgZ(5,"h5"),i._uU(6,"blyat"),i.qZA(),i.TgZ(7,"ion-button",0),i.NdJ("click",function(){return l.newGame()}),i._uU(8,"New Game"),i.qZA(),i.YNc(9,u,2,2,"div",1),i.qZA()),2&e&&(i.xp6(9),i.Q6J("ngForOf",l.field))},directives:[o.Gu,o.sr,o.wd,o.W2,o.YG,c.sg,c.mk],styles:[".fieldRow[_ngcontent-%COMP%]{display:table}.cell[_ngcontent-%COMP%]{width:50px;height:50px;border:1px solid #000;text-align:center;display:table-cell;vertical-align:middle}.cellStyleDefault[_ngcontent-%COMP%]{background-color:#aaa;color:#aaa;font-weight:700}.cellStyleMine[_ngcontent-%COMP%]{background-color:red}.cellStyle0[_ngcontent-%COMP%]{color:#ccc;background-color:#ccc}.cellStyle1[_ngcontent-%COMP%]{color:blue;background-color:#ccc}.cellStyle2[_ngcontent-%COMP%]{color:green;background-color:#ccc}.cellStyle3[_ngcontent-%COMP%]{color:red;background-color:#ccc}.cellStyle4[_ngcontent-%COMP%]{color:purple;background-color:#ccc}.cellStyle5[_ngcontent-%COMP%]{color:maroon;background-color:#ccc}.cellStyle6[_ngcontent-%COMP%]{color:turqoise;background-color:#ccc}.cellStyle7[_ngcontent-%COMP%]{color:#000;background-color:#ccc}.cellStyle8[_ngcontent-%COMP%]{color:gray;background-color:#ccc}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[r.Bz.forChild(h)],r.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(l){return new(l||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[g],imports:[[c.ez,n.u5,o.Pc,f]]}),e})()}}]);