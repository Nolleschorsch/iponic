<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-title>
            IPv4 Networking
        </ion-title>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    <ion-header collapse="condense">
        <ion-toolbar>
            <ion-title size="large">IPv4 Networking</ion-title>
        </ion-toolbar>
    </ion-header>

    <ion-grid>
        <ion-row>
            <ion-col size="12" size-sm="1">
                <ion-button (click)="toggleShowBinary()" color="{{showBinary ? 'medium' : 'primary'}}">
                    <ion-icon name="{{showBinary ? 'eye-off-outline' : 'eye-outline'}}"></ion-icon>
                </ion-button>
            </ion-col>

            <ion-col *ngFor="let dezi of addrDezimals; index as i; trackBy: trackByFn" size="12" size-sm="2">
                <ion-input value="{{dezi}}" (ionChange)="setAddrDezimal($event, i)"
                    (keypress)="_keyPressDezimal($event, i)"></ion-input>
                <ion-input *ngIf="showBinary" value="{{addrOctets[i]}}" (ionChange)="setAddrOctet($event, i)"
                    (keypress)="_keyPressBinary($event, i)"></ion-input>
            </ion-col>

            <ion-col size="12" size-sm="2">
                <ion-select [(ngModel)]="cidr">
                    <ion-select-option *ngFor="let c of cidrRange" value={{c}}>/{{c}}</ion-select-option>
                </ion-select>
            </ion-col>
        </ion-row>
        <ion-row class="ion-justify-content-center">
            <ion-col size="6">
                <h5 class="center">i have</h5>
                <ion-item>
                    <div class="d-flex align-items-center center">
                        <span [ngClass]="{'foo': useSubnetmask, 'bar': !useSubnetmask}">the number of subnets</span>
                        <ion-toggle color="primary" (ionChange)="toggleUseSubnetmask()"></ion-toggle>
                        <span [ngClass]="{'foo': !useSubnetmask, 'bar': useSubnetmask}">the subnet mask</span>
                    </div>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row *ngIf="useSubnetmask;">
            <ion-col size="12" size-sm="1"></ion-col>
            <ion-col *ngFor="let submaskDezi of submaskDezimals; index as i; trackBy: trackByFn" size="12" size-sm="2">
                <ion-input value="{{submaskDezi}}" (ionChange)="setSubmaskDezimal($event, i)"
                    (keypress)="_keyPressSubmaskDezimal($event, i)" placeholder="enter subnetmask"></ion-input>
                <ion-input *ngIf="showBinary" value="{{submaskOctets[i]}}" (ionChange)="setSubmaskOctet($event, i)"
                    (keypress)="_keyPressSubmaskBinary($event, i)" placeholder="enter subnetmask"></ion-input>
            </ion-col>
            <ion-col size="12" size-sm="2">
                <ion-select [(ngModel)]="subCidr">
                    <ion-select-option *ngFor="let c of subCidrRange.slice(fuckNg(cidr))" value={{c}}>/{{c}}</ion-select-option>
                </ion-select>
            </ion-col>
        </ion-row>
        <ion-row *ngIf="!useSubnetmask;">
            <ion-col class="ion-col-center">
                <ion-label>Enter number of Subnets:</ion-label>
                <ion-input value="{{subnetCount}}" (ionChange)="setSubnetCount($event)"
                    (keypress)="_keyPressSubnetCount($event)" placeholder="Enter number of subnets"></ion-input>
            </ion-col>
        </ion-row>
        <ion-row>
            <ion-col class="ion-col-center">
                <ion-button (click)="calculateSubnets()">GO</ion-button>
            </ion-col>
        </ion-row>
        <ion-row *ngFor="let subnet of subnets; index as i" [ngClass]="{'unused-network-row': i >= subnetCount}">
            <ion-col size="12" size-sm="1"></ion-col>
            <ion-col>{{subnet.networkID}}</ion-col>
            <ion-col>
                {{subnet.networkRange[0]}} - {{subnet.networkRange[1]}} ({{subnet.networkRange[2]}})
            </ion-col>
            <ion-col>{{subnet.broadcast}}</ion-col>
        </ion-row>

    </ion-grid>
</ion-content>