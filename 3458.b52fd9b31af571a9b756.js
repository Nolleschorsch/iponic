(self.webpackChunkiponic=self.webpackChunkiponic||[]).push([[3458],{3458:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MinesweeperPageModule:()=>u});var l=n(8583),i=n(665),c=n(3083),o=n(2316),r=n(639);let s=(()=>{class e{constructor(){this.getRandomInt=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),this.seedMines=(e,t)=>{let n=new Array;for(;n.length!=t;){let t=this.getRandomInt(0,e-1);-1==n.indexOf(t)&&n.push(t)}return n},this.getAdjectantCells=(e,t)=>{let n=[],l=Object.keys(e).length;Object.keys(e).forEach((t,l)=>{e[t].forEach((e,t)=>{n.push(e)})}),n.forEach((e,t)=>{let i=[];e.col>0&&i.push(n[e.index-1]),e.col<l-1&&i.push(n[e.index+1]),e.row>0&&(i.push(n[e.index-l]),n[e.index-l].col>0&&i.push(n[e.index-l-1]),n[e.index-l].col<l-1&&i.push(n[e.index-l+1])),e.row<l-1&&(i.push(n[e.index+l]),n[e.index+l].col>0&&i.push(n[e.index+l-1]),n[e.index+l].col<l-1&&i.push(n[e.index+l+1])),e.neighbours=i});let i=[];for(var c=0;c<l*t;c++){let e=Math.floor(c/t);i[e]||(i[e]=[]),i[e][c%t]=n[c]}return i},this.createField=(e,t,n)=>{const l=e*t;let i={};const c=this.seedMines(l,n);for(var o=0;o<l;o++){let e=-1!=c.indexOf(o),n=Math.floor(o/t);n in i||(i[n]=[]),i[n].push({mine:e,index:o,toggled:!1,flag:!1,row:Math.floor(o/t),col:o%t})}return this.getAdjectantCells(i,t)},this.handleToggleCell=(e,t,n)=>(e.toggled||(e.toggled=!0,t.push(e)),e.neighbours.forEach(e=>{e.mine||e.toggled||-1!=t.indexOf(e.index)||(e.toggled=!0,t.push(e),0==e.neighbours.filter(e=>1==e.mine).length&&this.handleToggleCell(e,t,n))}),[...new Set(t)].forEach(e=>n[e.row][e.col]=e),n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function g(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",7),r.NdJ("click",function(){const t=r.CHM(e).$implicit,n=r.oxw(2);return n.handleToggleCell(t,[],n.field)}),r._uU(1),r.qZA()}if(2&e){const e=t.$implicit,n=r.oxw(2);r.Q6J("ngClass",n.getStyle(e)),r.xp6(1),r.hij(" ",e.mine?"X":n.getAdjMines(e),"")}}function h(e,t){if(1&e&&(r.TgZ(0,"div",5),r.YNc(1,g,2,2,"div",6),r.qZA()),2&e){const e=t.$implicit,n=r.oxw();r.Q6J("ngClass",n.fieldRow),r.xp6(1),r.Q6J("ngForOf",e)}}const d=[{path:"",component:(()=>{class e{constructor(e){this.msService=e,this._height=10,this._width=10,this._mines=10}ngOnInit(){this._field=this.msService.createField(this._height,this._width,this._mines),console.log(this._field)}get height(){return this._height}set height(e){this._height=e}get width(){return this._width}set width(e){this._width=e}get mines(){return this._mines}set mines(e){this._mines=e}get field(){return this._field}newGame(){this._field=this.msService.createField(this._height,this._width,this._mines)}getMaxMines(){return this._height*this._width}getStyle(e){const t=e.neighbours.filter(e=>1==e.mine).length;if(!e.toggled)return"cell cellStyleDefault";if(e.mine)return"cell cellStyleMine";switch(t){case 1:return"cell cellStyle1";case 2:return"cell cellStyle2";case 3:return"cell cellStyle3";case 4:return"cell cellStyle4";case 5:return"cell cellStyle5";case 6:return"cell cellStyle6";case 7:return"cell cellStyle7";case 8:return"cell cellStyle8";default:return"cell cellStyle0"}}getAdjMines(e){return e.neighbours.filter(e=>1==e.mine).length}handleToggleCell(e,t,n){const l=this.msService.handleToggleCell(e,t,n);this._field=l}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-minesweeper"]],decls:23,vars:5,consts:[[1,"center"],[3,"click"],["type","number","min","3","max","15",3,"ngModel","ngModelChange"],["type","number","min","1",3,"max","ngModel","ngModelChange"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(e,t){1&e&&(r.TgZ(0,"ion-header"),r.TgZ(1,"ion-toolbar"),r.TgZ(2,"ion-title"),r._uU(3,"minesweeper"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(4,"ion-content"),r.TgZ(5,"div",0),r.TgZ(6,"ion-row"),r.TgZ(7,"ion-col"),r.TgZ(8,"ion-button",1),r.NdJ("click",function(){return t.newGame()}),r._uU(9,"New Game"),r.qZA(),r.qZA(),r.TgZ(10,"ion-col"),r.TgZ(11,"ion-label"),r._uU(12,"Width: "),r.qZA(),r.TgZ(13,"ion-input",2),r.NdJ("ngModelChange",function(e){return t.width=e}),r.qZA(),r.qZA(),r.TgZ(14,"ion-col"),r.TgZ(15,"ion-label"),r._uU(16,"Height: "),r.qZA(),r.TgZ(17,"ion-input",2),r.NdJ("ngModelChange",function(e){return t.height=e}),r.qZA(),r.qZA(),r.TgZ(18,"ion-col"),r.TgZ(19,"ion-label"),r._uU(20,"Mines: "),r.qZA(),r.TgZ(21,"ion-input",3),r.NdJ("ngModelChange",function(e){return t.mines=e}),r.qZA(),r.qZA(),r.qZA(),r.YNc(22,h,2,2,"div",4),r.qZA(),r.qZA()),2&e&&(r.xp6(13),r.Q6J("ngModel",t.width),r.xp6(4),r.Q6J("ngModel",t.height),r.xp6(4),r.s9C("max",t.getMaxMines()),r.Q6J("ngModel",t.mines),r.xp6(1),r.Q6J("ngForOf",t.field))},directives:[c.Gu,c.sr,c.wd,c.W2,c.Nd,c.wI,c.YG,c.Q$,c.pK,c.as,i.JJ,i.On,l.sg,l.mk],styles:[".center[_ngcontent-%COMP%]{text-align:center;width:90%;margin:0 auto}.fieldRow[_ngcontent-%COMP%]{display:table}.cell[_ngcontent-%COMP%]{width:50px;height:50px;border:1px solid #000;text-align:center;display:inline-block;line-height:50px;vertical-align:middle}.cellStyleDefault[_ngcontent-%COMP%]{background-color:#aaa;color:#aaa;font-weight:700}.cellStyleMine[_ngcontent-%COMP%]{background-color:red}.cellStyle0[_ngcontent-%COMP%]{color:#ccc;background-color:#ccc}.cellStyle1[_ngcontent-%COMP%]{color:blue;background-color:#ccc}.cellStyle2[_ngcontent-%COMP%]{color:green;background-color:#ccc}.cellStyle3[_ngcontent-%COMP%]{color:red;background-color:#ccc}.cellStyle4[_ngcontent-%COMP%]{color:purple;background-color:#ccc}.cellStyle5[_ngcontent-%COMP%]{color:maroon;background-color:#ccc}.cellStyle6[_ngcontent-%COMP%]{color:turqoise;background-color:#ccc}.cellStyle7[_ngcontent-%COMP%]{color:#000;background-color:#ccc}.cellStyle8[_ngcontent-%COMP%]{color:gray;background-color:#ccc}"]}),e})()}];let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[o.Bz.forChild(d)],o.Bz]}),e})(),u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[s],imports:[[l.ez,i.u5,c.Pc,a]]}),e})()}}]);